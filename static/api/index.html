<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
  <title>geoservice api</title>
  <link type="text/css" href="/css/geoservice.css" rel="stylesheet" />	
<script type="text/javascript">
	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-26661126-1']);
	_gaq.push(['_trackPageview']);

	(function() {
	var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();
</script> 
  
</head>
<body id="api">
	<header>
		<h1><a href="/">Geoservice</a> API</h1>
	</header>

	<h2 id="service"><label for="collections" ><strong>Select service</strong></label></h2> <select id="collections"></select> <div class="dataexplorer_link"><span>or go to</span><h2 id="dataexplorer"><a href="/explorer">Data Explorer</a></h2></div>	
	
	<p class="clear">&nbsp;</p>

	<div id="content">
		<h2>Basic REST use</h2>
		<br />
		http://host/[collection name]/[action]?[params]
		<ul>
			<li>Actions (/[collection name]/<strong>[action]</strong>)<br /><br />
				<ul id="actions">	
					<li><strong>/search</strong> <br /> with params
						<ul>
							<li>geo searches:
								<ul>
									<li>&amp;loc (latitude,longitude) or &amp;geoaddress (string)</li>
									<li>&amp;distance (number)</li>
								</ul>
							</li>
							<li>by fieldname searches:
								<ul>
									<li>&amp;[schema key] (=,>=,<=,<,>) [value]</li>
									<li>&amp;fulltext = [value]</li>
								</ul>
							</li>
							<li>Additional params:
								<ul>
									<li>&amp;skip (number) for pagination</li>
									<li>&amp;sort (schema key,[asc,desc]) you can set several sort params (e.g "&sort=locality,desc")</li>
								</ul>
							</li>
						</ul>
					</li>
					<li><strong>/distinct</strong> <br /> with params
						<ul>
							<li>&amp;key = [schema key]</li>
							<li>&amp;[schema key] = [regexp]</li>
						</ul>
					</li>
					<li><strong>/schema</strong> (to get the schema of the collection)</li>				
				</ul>
			<br />
			</li>				
			<li><strong>/collections</strong> (get all the collections in the host)<br /><br /></li>
			<li><strong>callback</strong>
				<ul>
					<li>&amp;cb (string) to wrap JSON outputs with a function</li>
				</ul>
			</li>
			<li><strong>Visualization</strong>
				<ul>
					<li>Data explorer /[collection name]/<strong>explorer</strong></li>
					<li>Map view /[collection name]/<strong>map</strong></li>
				</ul>
			</li>
			<li><strong>Layar output http://host/layar</strong><br /> basic params
				<ul>
					<li>&amp;layerName</li>
					<li>&amp;lat</li>
					<li>&amp;lon</li>
					<li>&amp;radius (meters)</li>
				</ul>
			</li>
		</ul>
		
		
		<h2>Geo Queries (distance: 0.1=100m, 1=km):</h2>
		<ul id="geo">	
		
		</ul>
		
		<h2>Queries by field name:</h2>
		<ul id="fieldname">	
		
		</ul>
		
		<h2>Mixed queries:</h2>
		<ul id="mixed">	
		
		</ul>

		<h2>Get distinct values for one key:</h2>
		<ul id="distinct">	
		</ul>
		
		<h2>Callback:</h2>
		<ul id="callback">	
		
		</ul>
		
		<h2>Pagination (max 100 results/page):</h2>
		<ul id="pagination">	
		
		</ul>
		
		<h2>Get Collection Schema:</h2>
		<ul id="schema">	
		
		</ul>

		<h2>Visualizations:</h2>
		<ul id="visu">	
		
		</ul>

		<h2>Layar:</h2>
		<ul id="layar">	
		
		</ul>
		
		<h2>Output Formats</h2>
		Add param "format" with next values (JSON output doesn't need it):
		<dl id="formats">
		  <dt>json</dt>
			<dd>json output</dd>
		  <dt>csv</dt>
			<dd>comma separated values file</dd>
		  <dt>xls</dt>
			<dd>MS Excel format</dd>
		  <dt>html</dt>
			<dd>Table output (with nested tables for childs in schema)</dd>
		  <dt>kml</dt>
			<dd>KML output format. You have to inform two additional params: <br />
				"kml_name" ([optional] name of the field which will be the name of Placemark)<br />
				"kml_description" ([optional] name of the field/s which will be the description of Placemark. You can add several fields separated by ",")<br />
			</dd>
		</dl>
		<ul id="format_samples">
		
		</ul>
				
	</div>
	
	<footer>
		<hr />
		<ul><li>Google+ <a href="http://gplus.to/davidayalas">http://gplus.to/davidayalas</a></li><li>Twitter: <a href="http://twitter.com/davidayalas">@davidayalas</a></li></ul><br />
	</footer>
	
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="/js/geoservice.js"></script>
  <script type="text/javascript" src="api/js/geoservice-api.js"></script>
	
</body>
</html>